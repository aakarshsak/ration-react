{"version":3,"file":"static/webpack/static/development/pages/index.js.b22d45879f1edc653b08.hot-update.js","sources":["webpack:///./components/navbar.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Menu, Container, Segment, Dropdown } from 'semantic-ui-react';\nimport {Link, Router} from '../routes';\nimport validate from '../localmodules/token_validate';\nimport get from '../localmodules/express_get';\n\nexport default class Navbar extends Component {\n\n    state = {\n        loggedIn : this.props.loggedIn,\n        user : {\n            name : {first :'', middle:'', last : ''},\n            address: {pin : '', state : '', house : '', phone : '', area:'', district:''},\n            _id : '',\n            email : '',\n            aadhar : ''\n        }\n    }\n\n    static getInitialProps(props) {\n        return validate(props.headerToken);\n    }\n\n    componentDidMount = () => {  \n        this.getUserDetails(this.props.headerToken);\n    }\n\n\n    logOut = (event) => {\n        this.setState({ loggedIn : false });\n        Router.pushRoute('/user/logout');\n    }\n\n    onProfileClick = () => {\n        Router.pushRoute(`/user/details/${validate(this.props.headerToken).headerToken}`)\n    }\n    \n\n\n    logInStatusRender = () => {\n\n        if(this.state.loggedIn){\n            return (\n                <Menu.Menu position='right'>\n                    <Menu.Item\n                        name={this.state.user.name.first +\" \"+ this.state.user.name.last}\n                        onClick={this.onProfileClick}                  \n                    />\n\n                    <Menu.Item \n                        name='Logout'\n                        onClick={this.logOut}    \n                    />\n                </Menu.Menu>\n\n            );\n        }\n\n\n        return (\n            <Menu.Menu position=\"right\">\n\n                <Link route='/user/register'>\n                    <a className='item'>Register</a>\n                </Link>\n\n                <Link route='/user/login'>\n                    <a className='item'>Login</a>\n                </Link>\n\n            </Menu.Menu>\n        );\n    }\n\n    getUserDetails = async (token) => {\n        const headers = { 'Content-Type':'application/json', 'x-auth-token' : token};\n        if(this.state.loggedIn){\n            const {data, status} = await get('/user/login/me', headers);\n            this.setState({user : data});\n        }\n\n    }\n\n\n\n\n    render() {\n\n        const { activeItem  } = this.state;\n        let defaultToken;\n        if(this.props.headerToken === '')\n            defaultToken = `/`;\n        else{\n            defaultToken = `/${validate(this.props.headerToken).headerToken}`;\n        }\n        return (\n            <Menu size='massive' inverted color='blue'>\n                \n                <Container>\n                    <Link route={defaultToken}>\n                        <a className='item'>eRation</a>\n                    </Link>\n                \n                {this.logInStatusRender()}\n                </Container>\n            </Menu>\n        );\n    }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AALA;AAFA;AACA;AAcA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AAAA;AAEA;AACA;AAFA;AAMA;AACA;AAFA;AAOA;AACA;AAEA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AAKA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;AAWA;AAAA;AAGA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAOA;;;AAxFA;AACA;AACA;;;;AAfA;AACA;;;;;A","sourceRoot":""}