{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Form, Input, Button } from 'semantic-ui-react';\nimport { saveToEthereum, manualSaveToEthereum } from '../../localmodules/data_initialization';\nimport factory from '../../ethereum/factory';\nimport web3 from '../../ethereum/web3';\nimport Shop from '../../ethereum/shop';\nimport Layout from '../../components/layout';\n\nvar UpdateBlockChain = /*#__PURE__*/function (_Component) {\n  _inherits(UpdateBlockChain, _Component);\n\n  function UpdateBlockChain() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UpdateBlockChain);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UpdateBlockChain)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      managerName: '',\n      fpdName: '',\n      shopName: '',\n      rice: '',\n      wheat: '',\n      arhad: '',\n      kerosene: '',\n      addr: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function _callee(event) {\n      var obj, accounts;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              obj = _this.state;\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(web3.eth.getAccounts());\n\n            case 4:\n              accounts = _context.sent;\n              //console.log(accounts, obj);\n              obj.addr = obj.addr + \", Tumakuru, Karnataka - 572103\"; //console.log(obj.addr);\n\n              saveToEthereum(obj);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function _callee2(event) {\n      var accounts, addresses, i, s;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              event.preventDefault();\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(web3.eth.getAccounts());\n\n            case 3:\n              accounts = _context2.sent;\n              _context2.next = 6;\n              return _regeneratorRuntime.awrap(factory.methods.getDeployedShops().call());\n\n            case 6:\n              addresses = _context2.sent;\n              console.log(addresses[addresses.length - 1]);\n              i = 0;\n\n            case 9:\n              if (!(i < addresses.length)) {\n                _context2.next = 16;\n                break;\n              }\n\n              s = Shop(addresses[addresses.length - 1]);\n              _context2.next = 13;\n              return _regeneratorRuntime.awrap(s.methods.createRequest(\"TUMAKURU\").send({\n                from: accounts[0]\n              }));\n\n            case 13:\n              i++;\n              _context2.next = 9;\n              break;\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"saveMultiples\", function _callee3(event) {\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              event.preventDefault();\n              manualSaveToEthereum();\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(UpdateBlockChain, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(Layout, null, __jsx(Form, {\n        onSubmit: this.onSubmit\n      }, __jsx(Form.Field, null, __jsx(\"label\", null, \"Manager Name\"), __jsx(Input, {\n        placeholder: \"Manager Name\",\n        type: \"text\",\n        value: this.state.managerName,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            managerName: event.target.value\n          });\n        }\n      })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Shop Name\"), __jsx(Input, {\n        placeholder: \"Shop Name\",\n        type: \"text\",\n        value: this.state.shopName,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            shopName: event.target.value\n          });\n        }\n      })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Address\"), __jsx(Input, {\n        placeholder: \"Address\",\n        type: \"text\",\n        value: this.state.addr,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            addr: event.target.value\n          });\n        }\n      })), __jsx(Form.Field, null, __jsx(\"label\", null, \"FPD Name\"), __jsx(Input, {\n        placeholder: \"FPD Name\",\n        type: \"text\",\n        value: this.state.fpdName,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            fpdName: event.target.value\n          });\n        }\n      })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Rice\"), __jsx(Input, {\n        placeholder: \"Rice\",\n        type: \"number\",\n        value: this.state.rice,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            rice: event.target.value\n          });\n        }\n      })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Wheat\"), __jsx(Input, {\n        placeholder: \"Wheat\",\n        type: \"number\",\n        value: this.state.wheat,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            wheat: event.target.value\n          });\n        }\n      })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Arhad\"), __jsx(Input, {\n        placeholder: \"Arhad\",\n        type: \"number\",\n        value: this.state.arhad,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            arhad: event.target.value\n          });\n        }\n      })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Kerosene\"), __jsx(Input, {\n        placeholder: \"Kerosene\",\n        type: \"number\",\n        value: this.state.kerosene,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            kerosene: event.target.value\n          });\n        }\n      })), __jsx(Button, null, \"Submit\")), __jsx(Button, {\n        onClick: this.onClick\n      }, \"CLick\"), __jsx(Button, {\n        onClick: this.saveMultiples\n      }, \"Save Multiples\"));\n    }\n  }]);\n\n  return UpdateBlockChain;\n}(Component);\n\nexport { UpdateBlockChain as default };","map":{"version":3,"sources":["/home/zoro/Documents/Programming/JS/ration/ration-react/pages/admin/update.js"],"names":["React","Component","Form","Input","Button","saveToEthereum","manualSaveToEthereum","factory","web3","Shop","Layout","UpdateBlockChain","managerName","fpdName","shopName","rice","wheat","arhad","kerosene","addr","event","preventDefault","obj","state","eth","getAccounts","accounts","methods","getDeployedShops","call","addresses","console","log","length","i","s","createRequest","send","from","onSubmit","setState","target","value","onClick","saveMultiples"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,MAAtB,QAAoC,mBAApC;AACA,SAASC,cAAT,EAAyBC,oBAAzB,QAAqD,wCAArD;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,IAAP,MAAiB,qBAAjB;AACA,OAAOC,IAAP,MAAiB,qBAAjB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;;IAGqBC,gB;;;;;;;;;;;;;;;;4DAET;AACJC,MAAAA,WAAW,EAAG,EADV;AAEJC,MAAAA,OAAO,EAAG,EAFN;AAGJC,MAAAA,QAAQ,EAAG,EAHP;AAIJC,MAAAA,IAAI,EAAG,EAJH;AAKJC,MAAAA,KAAK,EAAG,EALJ;AAMJC,MAAAA,KAAK,EAAG,EANJ;AAOJC,MAAAA,QAAQ,EAAG,EAPP;AAQJC,MAAAA,IAAI,EAAG;AARH,K;;+DAWG,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACPA,cAAAA,KAAK,CAACC,cAAN;AAEMC,cAAAA,GAHC,GAGK,MAAKC,KAHV;AAAA;AAAA,+CAIgBf,IAAI,CAACgB,GAAL,CAASC,WAAT,EAJhB;;AAAA;AAIDC,cAAAA,QAJC;AAKP;AACAJ,cAAAA,GAAG,CAACH,IAAJ,GAAWG,GAAG,CAACH,IAAJ,GAAW,gCAAtB,CANO,CAOP;;AACAd,cAAAA,cAAc,CAACiB,GAAD,CAAd;;AARO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;8DAWD,kBAAOF,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACNA,cAAAA,KAAK,CAACC,cAAN;AADM;AAAA,+CAIiBb,IAAI,CAACgB,GAAL,CAASC,WAAT,EAJjB;;AAAA;AAIAC,cAAAA,QAJA;AAAA;AAAA,+CAKkBnB,OAAO,CAACoB,OAAR,CAAgBC,gBAAhB,GAAmCC,IAAnC,EALlB;;AAAA;AAKAC,cAAAA,SALA;AAMNC,cAAAA,OAAO,CAACC,GAAR,CAAYF,SAAS,CAACA,SAAS,CAACG,MAAV,GAAiB,CAAlB,CAArB;AAEQC,cAAAA,CARF,GAQI,CARJ;;AAAA;AAAA,oBAQMA,CAAC,GAACJ,SAAS,CAACG,MARlB;AAAA;AAAA;AAAA;;AASIE,cAAAA,CATJ,GASQ1B,IAAI,CAACqB,SAAS,CAACA,SAAS,CAACG,MAAV,GAAiB,CAAlB,CAAV,CATZ;AAAA;AAAA,+CAUIE,CAAC,CAACR,OAAF,CAAUS,aAAV,CAAwB,UAAxB,EACLC,IADK,CACA;AACFC,gBAAAA,IAAI,EAAEZ,QAAQ,CAAC,CAAD;AADZ,eADA,CAVJ;;AAAA;AAQyBQ,cAAAA,CAAC,EAR1B;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oEAiBM,kBAAOd,KAAP;AAAA;AAAA;AAAA;AAAA;AACZA,cAAAA,KAAK,CAACC,cAAN;AACAf,cAAAA,oBAAoB;;AAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;;;;;;6BAOP;AAAA;;AACL,aAEI,MAAC,MAAD,QACI,MAAC,IAAD;AAAM,QAAA,QAAQ,EAAE,KAAKiC;AAArB,SACI,MAAC,IAAD,CAAM,KAAN,QACI,oCADJ,EAEI,MAAC,KAAD;AACI,QAAA,WAAW,EAAC,cADhB;AAEI,QAAA,IAAI,EAAC,MAFT;AAGI,QAAA,KAAK,EAAE,KAAKhB,KAAL,CAAWX,WAHtB;AAII,QAAA,QAAQ,EAAG,kBAAAQ,KAAK;AAAA,iBAAI,MAAI,CAACoB,QAAL,CAAc;AAAE5B,YAAAA,WAAW,EAAGQ,KAAK,CAACqB,MAAN,CAAaC;AAA7B,WAAd,CAAJ;AAAA;AAJpB,QAFJ,CADJ,EAUI,MAAC,IAAD,CAAM,KAAN,QACI,iCADJ,EAEI,MAAC,KAAD;AACI,QAAA,WAAW,EAAC,WADhB;AAEI,QAAA,IAAI,EAAC,MAFT;AAGI,QAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWT,QAHtB;AAII,QAAA,QAAQ,EAAG,kBAAAM,KAAK;AAAA,iBAAI,MAAI,CAACoB,QAAL,CAAc;AAAE1B,YAAAA,QAAQ,EAAGM,KAAK,CAACqB,MAAN,CAAaC;AAA1B,WAAd,CAAJ;AAAA;AAJpB,QAFJ,CAVJ,EAmBI,MAAC,IAAD,CAAM,KAAN,QACI,+BADJ,EAEI,MAAC,KAAD;AACI,QAAA,WAAW,EAAC,SADhB;AAEI,QAAA,IAAI,EAAC,MAFT;AAGI,QAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWJ,IAHtB;AAII,QAAA,QAAQ,EAAG,kBAAAC,KAAK;AAAA,iBAAI,MAAI,CAACoB,QAAL,CAAc;AAAErB,YAAAA,IAAI,EAAGC,KAAK,CAACqB,MAAN,CAAaC;AAAtB,WAAd,CAAJ;AAAA;AAJpB,QAFJ,CAnBJ,EAqCI,MAAC,IAAD,CAAM,KAAN,QACI,gCADJ,EAEI,MAAC,KAAD;AACI,QAAA,WAAW,EAAC,UADhB;AAEI,QAAA,IAAI,EAAC,MAFT;AAGI,QAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWV,OAHtB;AAII,QAAA,QAAQ,EAAG,kBAAAO,KAAK;AAAA,iBAAI,MAAI,CAACoB,QAAL,CAAc;AAAE3B,YAAAA,OAAO,EAAGO,KAAK,CAACqB,MAAN,CAAaC;AAAzB,WAAd,CAAJ;AAAA;AAJpB,QAFJ,CArCJ,EA8CI,MAAC,IAAD,CAAM,KAAN,QACI,4BADJ,EAEI,MAAC,KAAD;AACI,QAAA,WAAW,EAAC,MADhB;AAEI,QAAA,IAAI,EAAC,QAFT;AAGI,QAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWR,IAHtB;AAII,QAAA,QAAQ,EAAG,kBAAAK,KAAK;AAAA,iBAAI,MAAI,CAACoB,QAAL,CAAc;AAAEzB,YAAAA,IAAI,EAAGK,KAAK,CAACqB,MAAN,CAAaC;AAAtB,WAAd,CAAJ;AAAA;AAJpB,QAFJ,CA9CJ,EAuDI,MAAC,IAAD,CAAM,KAAN,QACI,6BADJ,EAEI,MAAC,KAAD;AACI,QAAA,WAAW,EAAC,OADhB;AAEI,QAAA,IAAI,EAAC,QAFT;AAGI,QAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWP,KAHtB;AAII,QAAA,QAAQ,EAAG,kBAAAI,KAAK;AAAA,iBAAI,MAAI,CAACoB,QAAL,CAAc;AAAExB,YAAAA,KAAK,EAAGI,KAAK,CAACqB,MAAN,CAAaC;AAAvB,WAAd,CAAJ;AAAA;AAJpB,QAFJ,CAvDJ,EAgEI,MAAC,IAAD,CAAM,KAAN,QACI,6BADJ,EAEI,MAAC,KAAD;AACI,QAAA,WAAW,EAAC,OADhB;AAEI,QAAA,IAAI,EAAC,QAFT;AAGI,QAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWN,KAHtB;AAII,QAAA,QAAQ,EAAG,kBAAAG,KAAK;AAAA,iBAAI,MAAI,CAACoB,QAAL,CAAc;AAAEvB,YAAAA,KAAK,EAAGG,KAAK,CAACqB,MAAN,CAAaC;AAAvB,WAAd,CAAJ;AAAA;AAJpB,QAFJ,CAhEJ,EAyEI,MAAC,IAAD,CAAM,KAAN,QACI,gCADJ,EAEI,MAAC,KAAD;AACI,QAAA,WAAW,EAAC,UADhB;AAEI,QAAA,IAAI,EAAC,QAFT;AAGI,QAAA,KAAK,EAAE,KAAKnB,KAAL,CAAWL,QAHtB;AAII,QAAA,QAAQ,EAAG,kBAAAE,KAAK;AAAA,iBAAI,MAAI,CAACoB,QAAL,CAAc;AAAEtB,YAAAA,QAAQ,EAAGE,KAAK,CAACqB,MAAN,CAAaC;AAA1B,WAAd,CAAJ;AAAA;AAJpB,QAFJ,CAzEJ,EAkFI,MAAC,MAAD,iBAlFJ,CADJ,EAsFI,MAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKC;AAAtB,iBAtFJ,EAuFI,MAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKC;AAAtB,0BAvFJ,CAFJ;AA4FH;;;;EA7IyC3C,S;;SAAzBU,gB","sourcesContent":["import React, { Component } from 'react';\nimport { Form, Input, Button } from 'semantic-ui-react';\nimport { saveToEthereum, manualSaveToEthereum } from '../../localmodules/data_initialization';\nimport factory from '../../ethereum/factory';\nimport web3 from '../../ethereum/web3';\nimport Shop from '../../ethereum/shop';\nimport Layout from '../../components/layout';\n\n\nexport default class UpdateBlockChain extends Component {\n\n    state = {\n        managerName : '',\n        fpdName : '',\n        shopName : '',\n        rice : '',\n        wheat : '',\n        arhad : '',\n        kerosene : '',\n        addr : '',\n    }\n\n    onSubmit = async (event) => {\n        event.preventDefault();\n\n        const obj = this.state;\n        const accounts = await web3.eth.getAccounts();\n        //console.log(accounts, obj);\n        obj.addr = obj.addr + \", Tumakuru, Karnataka - 572103\";\n        //console.log(obj.addr);\n        saveToEthereum(obj);\n    }\n\n    onClick = async (event) => {\n        event.preventDefault();\n\n\n        const accounts = await web3.eth.getAccounts();\n        const addresses = await factory.methods.getDeployedShops().call();\n        console.log(addresses[addresses.length-1]);\n\n        for(let i=0;i<addresses.length;i++){\n            const s = Shop(addresses[addresses.length-1]);\n            await s.methods.createRequest(\"TUMAKURU\")\n            .send({\n                from: accounts[0],\n            });\n        }\n    }\n\n    saveMultiples = async (event) => {\n        event.preventDefault();\n        manualSaveToEthereum();\n\n    }\n\n\n    render() {\n        return (\n        \n            <Layout>\n                <Form onSubmit={this.onSubmit}>\n                    <Form.Field>\n                        <label>Manager Name</label>\n                        <Input\n                            placeholder='Manager Name'\n                            type='text'\n                            value={this.state.managerName}\n                            onChange={ event => this.setState({ managerName : event.target.value }) }\n                            />\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Shop Name</label>\n                        <Input\n                            placeholder='Shop Name'\n                            type='text'\n                            value={this.state.shopName}\n                            onChange={ event => this.setState({ shopName : event.target.value }) }\n                            />\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Address</label>\n                        <Input\n                            placeholder='Address'\n                            type='text'\n                            value={this.state.addr}\n                            onChange={ event => this.setState({ addr : event.target.value }) }\n                            />\n                    </Form.Field>\n                    {/* <Form.Field>\n                        <label>Block Name</label>\n                        <Input\n                            placeholder='Block Name'\n                            type='text'\n                            value={this.state.blockName}\n                            onChange={ event => this.setState({ blockName : event.target.value }) }\n                            />\n                    </Form.Field> */}\n                    <Form.Field>\n                        <label>FPD Name</label>\n                        <Input\n                            placeholder='FPD Name'\n                            type='text'\n                            value={this.state.fpdName}\n                            onChange={ event => this.setState({ fpdName : event.target.value }) }\n                            />\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Rice</label>\n                        <Input\n                            placeholder='Rice'\n                            type='number'\n                            value={this.state.rice}\n                            onChange={ event => this.setState({ rice : event.target.value }) }\n                            />\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Wheat</label>\n                        <Input\n                            placeholder='Wheat'\n                            type='number'\n                            value={this.state.wheat}\n                            onChange={ event => this.setState({ wheat : event.target.value }) }\n                            />\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Arhad</label>\n                        <Input\n                            placeholder='Arhad'\n                            type='number'\n                            value={this.state.arhad}\n                            onChange={ event => this.setState({ arhad : event.target.value }) }\n                            />\n                    </Form.Field>\n                    <Form.Field>\n                        <label>Kerosene</label>\n                        <Input\n                            placeholder='Kerosene'\n                            type='number'\n                            value={this.state.kerosene}\n                            onChange={ event => this.setState({ kerosene : event.target.value }) }\n                            />\n                    </Form.Field>\n                    <Button>Submit</Button>\n                </Form>\n\n                <Button onClick={this.onClick}>CLick</Button>\n                <Button onClick={this.saveMultiples}>Save Multiples</Button>\n            </Layout>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}