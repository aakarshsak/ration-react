{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Card, Button } from 'semantic-ui-react';\nimport factory from '../ethereum/factory';\nimport Layout from '../components/layout';\nimport { Link } from '../routes';\nimport fetch from 'cross-fetch'; // import jsonArray from '../localmodules/data_initialization';\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function _callee(event) {\n      var options, res, status, data;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              options = {\n                method: 'get',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'x-auth-token': _this.props.headerToken\n                }\n              };\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(fetch('http://localhost:7800/user/loign/me', options));\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(res.status);\n\n            case 6:\n              status = _context.sent;\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(_JSON$stringify(res));\n\n            case 9:\n              data = _context.sent;\n              console(data);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"renderShops\",\n    value: function renderShops() {\n      var items = this.props.shops.map(function (address) {\n        return {\n          header: address,\n          description: __jsx(Link, {\n            route: \"shops/\".concat(address)\n          }, __jsx(\"a\", null, \"View Shops\")),\n          fluid: true\n        };\n      });\n      return __jsx(Card.Group, {\n        items: items\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(Layout, null, __jsx(\"div\", null, this.renderShops(), __jsx(Button, {\n        onClick: function onClick(event) {\n          return _this2.onClick;\n        },\n        content: \"Create Shops\",\n        icon: \"add circle\",\n        primary: true\n      })), __jsx(\"div\", null, this.props));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(props) {\n      var shops, headerToken;\n      return _regeneratorRuntime.async(function getInitialProps$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(factory.methods.getDeployedShops().call());\n\n            case 2:\n              shops = _context2.sent;\n              headerToken = props.query.headerToken;\n              return _context2.abrupt(\"return\", {\n                shops: shops,\n                headerToken: headerToken\n              });\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      });\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/zoro/Documents/Programming/JS/ration/ration-react/pages/index.js"],"names":["React","Component","Card","Button","factory","Layout","Link","fetch","App","event","options","method","headers","props","headerToken","res","status","data","console","items","shops","map","address","header","description","fluid","renderShops","onClick","methods","getDeployedShops","call","query"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,mBAA7B;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,IAAT,QAAqB,WAArB;AACA,OAAOC,KAAP,MAAkB,aAAlB,C,CACA;;IAEMC,G;;;;;;;;;;;;;;;;8DAoBQ,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACAC,cAAAA,OADA,GACU;AACZC,gBAAAA,MAAM,EAAG,KADG;AAEZC,gBAAAA,OAAO,EAAE;AACL,kCAAe,kBADV;AAEL,kCAAiB,MAAKC,KAAL,CAAWC;AAFvB;AAFG,eADV;AAAA;AAAA,+CAUYP,KAAK,CAAC,qCAAD,EAAwCG,OAAxC,CAVjB;;AAAA;AAUAK,cAAAA,GAVA;AAAA;AAAA,+CAWeA,GAAG,CAACC,MAXnB;;AAAA;AAWAA,cAAAA,MAXA;AAAA;AAAA,+CAYa,gBAAeD,GAAf,CAZb;;AAAA;AAYAE,cAAAA,IAZA;AAaNC,cAAAA,OAAO,CAACD,IAAD,CAAP;;AAbM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;;;;;;kCAZI;AACV,UAAME,KAAK,GAAG,KAAKN,KAAL,CAAWO,KAAX,CAAiBC,GAAjB,CAAqB,UAAAC,OAAO,EAAI;AAC1C,eAAM;AACFC,UAAAA,MAAM,EAAGD,OADP;AAEFE,UAAAA,WAAW,EAAG,MAAC,IAAD;AAAM,YAAA,KAAK,kBAAWF,OAAX;AAAX,aAAiC,8BAAjC,CAFZ;AAGFG,UAAAA,KAAK,EAAG;AAHN,SAAN;AAKH,OANa,CAAd;AAQA,aAAO,MAAC,IAAD,CAAM,KAAN;AAAY,QAAA,KAAK,EAAEN;AAAnB,QAAP;AACH;;;6BAkBQ;AAAA;;AACL,aACI,MAAC,MAAD,QACI,mBACK,KAAKO,WAAL,EADL,EAEI,MAAC,MAAD;AACI,QAAA,OAAO,EAAE,iBAACjB,KAAD;AAAA,iBAAW,MAAI,CAACkB,OAAhB;AAAA,SADb;AAEI,QAAA,OAAO,EAAC,cAFZ;AAGI,QAAA,IAAI,EAAC,YAHT;AAII,QAAA,OAAO;AAJX,QAFJ,CADJ,EAUI,mBAAM,KAAKd,KAAX,CAVJ,CADJ;AAeH;;;oCAlD4BA,K;;;;;;;+CACLT,OAAO,CAACwB,OAAR,CAAgBC,gBAAhB,GAAmCC,IAAnC,E;;;AAAdV,cAAAA,K;AACAN,cAAAA,W,GAAcD,KAAK,CAACkB,KAAN,CAAYjB,W;gDACzB;AAAEM,gBAAAA,KAAK,EAALA,KAAF;AAASN,gBAAAA,WAAW,EAAXA;AAAT,e;;;;;;;;;;;;EALGb,S;;AAwDlB,eAAeO,GAAf","sourcesContent":["import React, {Component} from 'react';\nimport { Card, Button } from 'semantic-ui-react';\nimport factory from '../ethereum/factory';\nimport Layout from '../components/layout';\nimport { Link } from '../routes';\nimport fetch from 'cross-fetch';\n// import jsonArray from '../localmodules/data_initialization';\n\nclass App extends Component {\n\n    static async getInitialProps(props) {\n        const shops = await factory.methods.getDeployedShops().call();\n        const headerToken = props.query.headerToken;\n        return { shops, headerToken };\n    }\n    \n    renderShops() {\n        const items = this.props.shops.map(address => {\n            return{\n                header : address,\n                description : <Link route={`shops/${address}`}><a>View Shops</a></Link>,\n                fluid : true\n            };\n        });\n\n        return <Card.Group items={items}/>;\n    }\n\n    onClick = async (event) => {\n        const options = {\n            method : 'get',\n            headers: { \n                'Content-Type':'application/json',\n                'x-auth-token' : this.props.headerToken\n            },\n        };\n\n\n        const res = await fetch('http://localhost:7800/user/loign/me', options);\n        const status = await res.status;\n        const data = await JSON.stringify(res);\n        console(data);\n    }\n\n    render() {\n        return (\n            <Layout>\n                <div>\n                    {this.renderShops()}\n                    <Button\n                        onClick={(event) => this.onClick}\n                        content=\"Create Shops\"\n                        icon=\"add circle\"\n                        primary\n                    />\n                </div>\n                <div>{this.props}</div>\n            </Layout>\n        );\n\n    }\n\n}\n\nexport default App;\n\n\n"]},"metadata":{},"sourceType":"module"}