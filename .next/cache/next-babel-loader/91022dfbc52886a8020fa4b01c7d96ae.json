{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { Card, Button } from 'semantic-ui-react';\nimport factory from '../ethereum/factory';\nimport Layout from '../components/layout';\nimport { Link, Router } from '../routes';\nimport get from '../localmodules/express_get';\nimport validate from '../localmodules/token_validate';\nimport Shop from '../ethereum/shop'; // import jsonArray from '../localmodules/data_initialization';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"getShopName\", async address => {\n      const s = Shop(address);\n      const shopName = await s.methods.shopName.call();\n    });\n\n    _defineProperty(this, \"onClick2\", address => {\n      Router.pushRoute(`/${validate(this.props.headerToken).headerToken}/shops/${address}`);\n    });\n\n    _defineProperty(this, \"renderShops\", () => {\n      const items = this.props.shops.map(address => {\n        const name = this.getShopName(address);\n        return {\n          header: name,\n          description: __jsx(\"a\", {\n            onClick: this.onClick2\n          }, \"View Shops\"),\n          fluid: true\n        };\n      });\n      return __jsx(Card.Group, {\n        items: items\n      });\n    });\n\n    _defineProperty(this, \"onClick\", async event => {\n      event.preventDefault();\n      const headers = {\n        'Content-Type': 'application/json',\n        'x-auth-token': this.props.headerToken\n      };\n      const {\n        data,\n        status\n      } = await get('/user/login/me', headers);\n      console.log(data);\n      console.log(status);\n    });\n  }\n\n  static async getInitialProps(props) {\n    const shops = await factory.methods.getDeployedShops().call();\n    const {\n      loggedIn,\n      headerToken\n    } = validate(props.query.headerToken);\n    return {\n      shops,\n      headerToken,\n      loggedIn\n    };\n  }\n\n  render() {\n    return __jsx(Layout, {\n      loggedIn: this.props.loggedIn,\n      headerToken: this.props.headerToken\n    }, __jsx(\"div\", null, this.renderShops(), __jsx(Button, {\n      onClick: this.onClick,\n      content: \"Create Shops\",\n      icon: \"add circle\",\n      primary: true\n    })), __jsx(\"div\", null, this.props.headerToken));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/zoro/Documents/Programming/JS/ration/ration-react/pages/index.js"],"names":["React","Component","Card","Button","factory","Layout","Link","Router","get","validate","Shop","App","address","s","shopName","methods","call","pushRoute","props","headerToken","items","shops","map","name","getShopName","header","description","onClick2","fluid","event","preventDefault","headers","data","status","console","log","getInitialProps","getDeployedShops","loggedIn","query","render","renderShops","onClick"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,mBAA7B;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,WAA7B;AACA,OAAOC,GAAP,MAAgB,6BAAhB;AACA,OAAOC,QAAP,MAAqB,gCAArB;AACA,OAAOC,IAAP,MAAiB,kBAAjB,C,CACA;;AAEA,MAAMC,GAAN,SAAkBV,SAAlB,CAA4B;AAAA;AAAA;;AAAA,yCAQV,MAAOW,OAAP,IAAmB;AAC7B,YAAMC,CAAC,GAAGH,IAAI,CAACE,OAAD,CAAd;AACA,YAAME,QAAQ,GAAG,MAAMD,CAAC,CAACE,OAAF,CAAUD,QAAV,CAAmBE,IAAnB,EAAvB;AACH,KAXuB;;AAAA,sCAaZJ,OAAD,IAAa;AACpBL,MAAAA,MAAM,CAACU,SAAP,CAAkB,IAAGR,QAAQ,CAAC,KAAKS,KAAL,CAAWC,WAAZ,CAAR,CAAiCA,WAAY,UAASP,OAAQ,EAAnF;AACH,KAfuB;;AAAA,yCAiBV,MAAM;AAChB,YAAMQ,KAAK,GAAG,KAAKF,KAAL,CAAWG,KAAX,CAAiBC,GAAjB,CAAsBV,OAAD,IAAa;AAC5C,cAAMW,IAAI,GAAG,KAAKC,WAAL,CAAiBZ,OAAjB,CAAb;AACA,eAAM;AACFa,UAAAA,MAAM,EAAGF,IADP;AAEFG,UAAAA,WAAW,EAAG;AAAG,YAAA,OAAO,EAAE,KAAKC;AAAjB,0BAFZ;AAGFC,UAAAA,KAAK,EAAG;AAHN,SAAN;AAKH,OAPa,CAAd;AASA,aAAO,MAAC,IAAD,CAAM,KAAN;AAAY,QAAA,KAAK,EAAER;AAAnB,QAAP;AACH,KA5BuB;;AAAA,qCA8Bd,MAAOS,KAAP,IAAiB;AACvBA,MAAAA,KAAK,CAACC,cAAN;AACA,YAAMC,OAAO,GAAG;AACR,wBAAe,kBADP;AAER,wBAAiB,KAAKb,KAAL,CAAWC;AAFpB,OAAhB;AAKA,YAAM;AAACa,QAAAA,IAAD;AAAOC,QAAAA;AAAP,UAAiB,MAAMzB,GAAG,CAAC,gBAAD,EAAmBuB,OAAnB,CAAhC;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACH,KAxCuB;AAAA;;AAExB,eAAaG,eAAb,CAA6BlB,KAA7B,EAAoC;AAChC,UAAMG,KAAK,GAAG,MAAMjB,OAAO,CAACW,OAAR,CAAgBsB,gBAAhB,GAAmCrB,IAAnC,EAApB;AACA,UAAM;AAAEsB,MAAAA,QAAF;AAAYnB,MAAAA;AAAZ,QAA4BV,QAAQ,CAACS,KAAK,CAACqB,KAAN,CAAYpB,WAAb,CAA1C;AACA,WAAO;AAAEE,MAAAA,KAAF;AAASF,MAAAA,WAAT;AAAsBmB,MAAAA;AAAtB,KAAP;AACH;;AAoCDE,EAAAA,MAAM,GAAG;AACL,WACI,MAAC,MAAD;AAAQ,MAAA,QAAQ,EAAE,KAAKtB,KAAL,CAAWoB,QAA7B;AAAuC,MAAA,WAAW,EAAE,KAAKpB,KAAL,CAAWC;AAA/D,OACI,mBACK,KAAKsB,WAAL,EADL,EAEI,MAAC,MAAD;AACI,MAAA,OAAO,EAAE,KAAKC,OADlB;AAEI,MAAA,OAAO,EAAC,cAFZ;AAGI,MAAA,IAAI,EAAC,YAHT;AAII,MAAA,OAAO;AAJX,MAFJ,CADJ,EAUI,mBAAM,KAAKxB,KAAL,CAAWC,WAAjB,CAVJ,CADJ;AAeH;;AA1DuB;;AA8D5B,eAAeR,GAAf","sourcesContent":["import React, {Component} from 'react';\nimport { Card, Button } from 'semantic-ui-react';\nimport factory from '../ethereum/factory';\nimport Layout from '../components/layout';\nimport { Link, Router } from '../routes';\nimport get from '../localmodules/express_get';\nimport validate from '../localmodules/token_validate';\nimport Shop from '../ethereum/shop';\n// import jsonArray from '../localmodules/data_initialization';\n\nclass App extends Component {\n    \n    static async getInitialProps(props) {\n        const shops = await factory.methods.getDeployedShops().call();\n        const { loggedIn, headerToken } = validate(props.query.headerToken);\n        return { shops, headerToken, loggedIn };\n    }\n    \n    getShopName = async (address) => {\n        const s = Shop(address);\n        const shopName = await s.methods.shopName.call(); \n    }\n\n    onClick2 = (address) => {\n        Router.pushRoute(`/${validate(this.props.headerToken).headerToken}/shops/${address}`)\n    }\n\n    renderShops = () => {\n        const items = this.props.shops.map((address) => {\n            const name = this.getShopName(address);\n            return{\n                header : name,\n                description : <a onClick={this.onClick2}>View Shops</a>,\n                fluid : true\n            };\n        });\n\n        return <Card.Group items={items}/>;\n    }\n\n    onClick = async (event) => {\n        event.preventDefault();\n        const headers = { \n                'Content-Type':'application/json',\n                'x-auth-token' : this.props.headerToken\n        };\n\n        const {data, status} = await get('/user/login/me', headers);\n        console.log(data);\n        console.log(status);\n    }\n\n    render() {\n        return (\n            <Layout loggedIn={this.props.loggedIn} headerToken={this.props.headerToken}>\n                <div>\n                    {this.renderShops()}\n                    <Button\n                        onClick={this.onClick}\n                        content=\"Create Shops\"\n                        icon=\"add circle\"\n                        primary\n                    />\n                </div>\n                <div>{this.props.headerToken}</div>\n            </Layout>\n        );\n\n    }\n\n}\n\nexport default App;\n\n\n"]},"metadata":{},"sourceType":"module"}