{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { Menu, Container, Segment, Dropdown } from 'semantic-ui-react';\nimport { Link, Router } from '../routes';\nimport validate from '../localmodules/token_validate';\nimport get from '../localmodules/express_get';\nexport default class Navbar extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      loggedIn: this.props.loggedIn,\n      user: {\n        name: {\n          first: '',\n          middle: '',\n          last: ''\n        },\n        address: {\n          pin: '',\n          state: '',\n          house: '',\n          phone: '',\n          area: '',\n          district: ''\n        },\n        _id: '',\n        email: '',\n        aadhar: ''\n      }\n    });\n\n    _defineProperty(this, \"componentDidMount\", () => {\n      this.getUserDetails(this.props.headerToken);\n    });\n\n    _defineProperty(this, \"logOut\", event => {\n      this.setState({\n        loggedIn: false\n      });\n      Router.pushRoute('/user/logout');\n    });\n\n    _defineProperty(this, \"onProfileClick\", () => {\n      Router.pushRoute(`/user/details/${validate(this.props.headerToken).headerToken}`);\n    });\n\n    _defineProperty(this, \"logInStatusRender\", () => {\n      if (this.state.loggedIn) {\n        return __jsx(Menu.Menu, {\n          position: \"right\"\n        }, __jsx(Menu.Item, {\n          name: this.state.user.name.first + \" \" + this.state.user.name.last,\n          onClick: this.onProfileClick\n        }), __jsx(Menu.Item, {\n          name: \"Logout\",\n          onClick: this.logOut\n        }));\n      }\n\n      return __jsx(Menu.Menu, {\n        position: \"right\"\n      }, __jsx(Link, {\n        route: \"/user/register\"\n      }, __jsx(\"a\", {\n        className: \"item\"\n      }, \"Register\")), __jsx(Link, {\n        route: \"/user/login\"\n      }, __jsx(\"a\", {\n        className: \"item\"\n      }, \"Login\")));\n    });\n\n    _defineProperty(this, \"getUserDetails\", async token => {\n      const headers = {\n        'Content-Type': 'application/json',\n        'x-auth-token': token\n      };\n\n      if (this.state.loggedIn) {\n        const {\n          data,\n          status\n        } = await get('/user/login/me', headers);\n        this.setState({\n          user: data\n        });\n      }\n    });\n  }\n\n  static getInitialProps(props) {\n    return validate(props.headerToken);\n  }\n\n  render() {\n    const {\n      activeItem\n    } = this.state;\n    let defaultToken;\n    defaultToken = `/${validate(this.props.headerToken).headerToken}`;\n    return __jsx(Menu, {\n      size: \"massive\",\n      inverted: true,\n      color: \"blue\"\n    }, __jsx(Container, null, __jsx(Link, {\n      route: defaultToken\n    }, __jsx(\"a\", {\n      className: \"item\"\n    }, \"eRation\")), this.logInStatusRender()));\n  }\n\n}","map":{"version":3,"sources":["/home/zoro/Documents/Programming/JS/ration/ration-react/components/navbar.js"],"names":["React","Component","Menu","Container","Segment","Dropdown","Link","Router","validate","get","Navbar","loggedIn","props","user","name","first","middle","last","address","pin","state","house","phone","area","district","_id","email","aadhar","getUserDetails","headerToken","event","setState","pushRoute","onProfileClick","logOut","token","headers","data","status","getInitialProps","render","activeItem","defaultToken","logInStatusRender"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Menu, Container, Segment, Dropdown } from 'semantic-ui-react';\nimport {Link, Router} from '../routes';\nimport validate from '../localmodules/token_validate';\nimport get from '../localmodules/express_get';\n\nexport default class Navbar extends Component {\n\n    state = {\n        loggedIn : this.props.loggedIn,\n        user : {\n            name : {first :'', middle:'', last : ''},\n            address: {pin : '', state : '', house : '', phone : '', area:'', district:''},\n            _id : '',\n            email : '',\n            aadhar : ''\n        }\n    }\n\n    static getInitialProps(props) {\n        return validate(props.headerToken);\n    }\n\n    componentDidMount = () => {  \n        this.getUserDetails(this.props.headerToken);\n    }\n\n\n    logOut = (event) => {\n        this.setState({ loggedIn : false });\n        Router.pushRoute('/user/logout');\n    }\n\n    onProfileClick = () => {\n        Router.pushRoute(`/user/details/${validate(this.props.headerToken).headerToken}`)\n    }\n    \n\n\n    logInStatusRender = () => {\n\n        if(this.state.loggedIn){\n            return (\n                <Menu.Menu position='right'>\n                    <Menu.Item\n                        name={this.state.user.name.first +\" \"+ this.state.user.name.last}\n                        onClick={this.onProfileClick}                  \n                    />\n\n                    <Menu.Item \n                        name='Logout'\n                        onClick={this.logOut}    \n                    />\n                </Menu.Menu>\n\n            );\n        }\n\n\n        return (\n            <Menu.Menu position=\"right\">\n\n                <Link route='/user/register'>\n                    <a className='item'>Register</a>\n                </Link>\n\n                <Link route='/user/login'>\n                    <a className='item'>Login</a>\n                </Link>\n\n            </Menu.Menu>\n        );\n    }\n\n    getUserDetails = async (token) => {\n        const headers = { 'Content-Type':'application/json', 'x-auth-token' : token};\n        if(this.state.loggedIn){\n            const {data, status} = await get('/user/login/me', headers);\n            this.setState({user : data});\n        }\n\n    }\n\n\n\n\n    render() {\n\n        const { activeItem  } = this.state;\n        let defaultToken;\n        defaultToken = `/${validate(this.props.headerToken).headerToken}`;\n        \n        return (\n            <Menu size='massive' inverted color='blue'>\n                \n                <Container>\n                    <Link route={defaultToken}>\n                        <a className='item'>eRation</a>\n                    </Link>\n                \n                {this.logInStatusRender()}\n                </Container>\n            </Menu>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}