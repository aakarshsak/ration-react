{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Menu, Container, Segment, Dropdown } from 'semantic-ui-react';\nimport { Link, Router } from '../routes';\nimport validate from '../localmodules/token_validate';\nimport get from '../localmodules/express_get';\n\nvar Navbar = /*#__PURE__*/function (_Component) {\n  _inherits(Navbar, _Component);\n\n  function Navbar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Navbar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Navbar)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      activeItem: 'home',\n      loggedIn: false,\n      user: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function (event, _ref) {\n      var name = _ref.name;\n\n      _this.setState({\n        activeItem: name\n      });\n\n      console.log(name);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"logOut\", function (event) {\n      _this.setState({\n        loggedIn: false\n      });\n\n      Router.pushRoute('/user/login');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"logInStatusRender\", function () {\n      if (_this.props.loggedIn) {\n        return __jsx(Menu.Menu, {\n          position: \"right\"\n        }, __jsx(Dropdown, {\n          item: true,\n          text: \"gggg\"\n        }, __jsx(Dropdown.Menu, null, __jsx(Dropdown.Item, null, \"First\"), __jsx(Dropdown.Item, null, \"Second\"), __jsx(Dropdown.Item, null, \"Third\"), __jsx(Dropdown.Item, null, \"Fourth\"))), __jsx(Menu.Item, {\n          name: \"Logout\",\n          onClick: _this.logOut\n        }));\n      }\n\n      return __jsx(Menu.Menu, {\n        position: \"right\"\n      }, __jsx(Link, {\n        route: \"/user/register\"\n      }, __jsx(\"a\", {\n        className: \"item\"\n      }, \"Register\")), __jsx(Link, {\n        route: \"/user/login\"\n      }, __jsx(\"a\", {\n        className: \"item\"\n      }, \"Login\")));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getUserDetails\", function _callee(token) {\n      var user, headers, res, status;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              headers = {\n                'Content-Type': 'application/json',\n                'x-auth-token': token\n              };\n\n              if (!(_this.props.loggedIn === true)) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(get('/user/login/me', headers));\n\n            case 4:\n              res = _context.sent;\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(res.json());\n\n            case 7:\n              user = _context.sent;\n              _context.next = 10;\n              return _regeneratorRuntime.awrap(res.status);\n\n            case 10:\n              status = _context.sent;\n              console.log(status);\n              console.log(user);\n\n              _this.setState({\n                user: user\n              });\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Navbar, [{\n    key: \"render\",\n    value: function render() {\n      this.getUserDetails(this.props.headerToken);\n      var activeItem = this.state.activeItem;\n      return __jsx(Menu, {\n        size: \"massive\",\n        inverted: true,\n        color: \"blue\"\n      }, __jsx(Link, {\n        route: \"/\".concat(validate(this.props.headerToken).headerToken)\n      }, __jsx(\"a\", {\n        className: \"item\"\n      }, \"eR\")), __jsx(Container, null, __jsx(Menu.Item, {\n        name: \"home\",\n        active: activeItem === 'home',\n        onClick: this.onClick\n      }), __jsx(Menu.Item, {\n        name: \"something1\",\n        active: activeItem === 'something1',\n        onClick: this.onClick\n      }), __jsx(Menu.Item, {\n        name: \"something2\",\n        active: activeItem === 'something2',\n        onClick: this.onClick\n      })), this.logInStatusRender());\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(props) {\n      return validate(props.headerToken);\n    }\n  }]);\n\n  return Navbar;\n}(Component);\n\nexport { Navbar as default };","map":{"version":3,"sources":["/home/zoro/Documents/Programming/JS/ration/ration-react/components/navbar.js"],"names":["React","Component","Menu","Container","Segment","Dropdown","Link","Router","validate","get","Navbar","activeItem","loggedIn","user","event","name","setState","console","log","pushRoute","props","logOut","token","headers","res","json","status","getUserDetails","headerToken","state","onClick","logInStatusRender"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Menu, Container, Segment, Dropdown } from 'semantic-ui-react';\nimport {Link, Router} from '../routes';\nimport validate from '../localmodules/token_validate';\nimport get from '../localmodules/express_get';\n\nexport default class Navbar extends Component {\n\n    state = {\n        activeItem : 'home',\n        loggedIn : false,\n        user : {}\n    }\n\n    static getInitialProps(props) {  \n        return validate(props.headerToken);\n    }\n\n    onClick = (event, { name })=> {\n        this.setState({activeItem:name});\n        console.log(name);\n    }\n\n    logOut = (event) => {\n        this.setState({ loggedIn : false });\n        Router.pushRoute('/user/login');\n    }\n\n\n\n    logInStatusRender = () => {\n\n        if(this.props.loggedIn){\n            return (\n                <Menu.Menu position='right'>\n                    <Dropdown item text='gggg'>\n                        <Dropdown.Menu>\n                            <Dropdown.Item>First</Dropdown.Item>\n                            <Dropdown.Item>Second</Dropdown.Item>\n                            <Dropdown.Item>Third</Dropdown.Item>\n                            <Dropdown.Item>Fourth</Dropdown.Item>\n                        </Dropdown.Menu>\n                    </Dropdown>\n\n                    <Menu.Item \n                        name='Logout'\n                        onClick={this.logOut}    \n                    />\n                </Menu.Menu>\n\n            );\n        }\n\n\n        return (\n            <Menu.Menu position=\"right\">\n\n                <Link route='/user/register'>\n                    <a className='item'>Register</a>\n                </Link>\n\n                <Link route='/user/login'>\n                    <a className='item'>Login</a>\n                </Link>\n\n            </Menu.Menu>\n        );\n    }\n\n    getUserDetails = async (token) => {\n        let user;\n        const headers = { 'Content-Type':'application/json', 'x-auth-token' : token};\n        if(this.props.loggedIn === true){\n            const res = await get('/user/login/me', headers);\n            user = await res.json();\n            const status = await res.status;\n            console.log(status);\n            console.log(user);\n            this.setState({user});\n        }\n\n    }\n\n\n\n\n    render() {\n\n        this.getUserDetails(this.props.headerToken);\n\n        const { activeItem  } = this.state;\n        return (\n                <Menu size='massive' inverted color='blue'>\n                    <Link route={`/${validate(this.props.headerToken).headerToken}`}>\n                        <a className='item'>eR</a>\n                    </Link>\n                    <Container>\n                        <Menu.Item \n                            name='home'\n                            active={activeItem === 'home'}\n                            onClick={this.onClick}\n                        />\n\n                        <Menu.Item \n                            name='something1'\n                            active={activeItem === 'something1'}\n                            onClick={this.onClick}\n                        />\n\n                        <Menu.Item \n                            name='something2'\n                            active={activeItem === 'something2'}\n                            onClick={this.onClick}\n                        />\n                    </Container>\n\n                    {this.logInStatusRender()}\n                </Menu>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}