{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { Menu, Container, Segment, Dropdown } from 'semantic-ui-react';\nimport { Link, Router } from '../routes';\nimport validate from '../localmodules/token_validate';\nimport get from '../localmodules/express_get';\n\nvar Navbar = /*#__PURE__*/function (_Component) {\n  _inherits(Navbar, _Component);\n\n  function Navbar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Navbar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Navbar)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      loggedIn: _this.props.loggedIn,\n      user: {\n        name: {\n          first: '',\n          middle: '',\n          last: ''\n        },\n        address: {\n          pin: '',\n          state: '',\n          house: '',\n          phone: '',\n          area: '',\n          district: ''\n        },\n        _id: '',\n        email: '',\n        aadhar: ''\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", function () {\n      _this.getUserDetails(_this.props.headerToken);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"logOut\", function (event) {\n      _this.setState({\n        loggedIn: false\n      });\n\n      Router.pushRoute('/user/logout');\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onProfileClick\", function () {});\n\n    _defineProperty(_assertThisInitialized(_this), \"logInStatusRender\", function () {\n      var optionsArray = [{\n        key: '1',\n        value: 'details',\n        text: 'Profile'\n      }, {\n        key: '2',\n        value: 'orders',\n        text: 'Orders'\n      }];\n\n      if (_this.state.loggedIn) {\n        return __jsx(Menu.Menu, {\n          position: \"right\"\n        }, __jsx(Menu.Item, {\n          name: _this.state.user.name.first + \" \" + _this.state.user.name.last,\n          onClick: _this.onProfileClick\n        }), __jsx(Menu.Item, {\n          name: \"Logout\",\n          onClick: _this.logOut\n        }));\n      }\n\n      return __jsx(Menu.Menu, {\n        position: \"right\"\n      }, __jsx(Link, {\n        route: \"/user/register\"\n      }, __jsx(\"a\", {\n        className: \"item\"\n      }, \"Register\")), __jsx(Link, {\n        route: \"/user/login\"\n      }, __jsx(\"a\", {\n        className: \"item\"\n      }, \"Login\")));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getUserDetails\", function _callee(token) {\n      var headers, _ref, data, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              headers = {\n                'Content-Type': 'application/json',\n                'x-auth-token': token\n              };\n\n              if (!_this.state.loggedIn) {\n                _context.next = 8;\n                break;\n              }\n\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(get('/user/login/me', headers));\n\n            case 4:\n              _ref = _context.sent;\n              data = _ref.data;\n              status = _ref.status;\n\n              _this.setState({\n                user: data\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Navbar, [{\n    key: \"render\",\n    value: function render() {\n      var activeItem = this.state.activeItem;\n      return __jsx(Menu, {\n        size: \"massive\",\n        inverted: true,\n        color: \"blue\"\n      }, __jsx(Container, null, __jsx(Link, {\n        route: \"/\".concat(validate('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVlYTMwMTFjMDUwZGFlMzI3YTFiMGIxOSIsImlhdCI6MTU4ODI3NzE0NH0.N8pZTLqwvgrSmkSYP9FJkXDBqSZUOgBWeCmE__ewS-o').headerToken)\n      }, __jsx(\"a\", {\n        className: \"item\"\n      }, \"eR\")), this.logInStatusRender()));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(props) {\n      return validate(props.headerToken);\n    }\n  }]);\n\n  return Navbar;\n}(Component);\n\nexport { Navbar as default };","map":{"version":3,"sources":["/home/zoro/Documents/Programming/JS/ration/ration-react/components/navbar.js"],"names":["React","Component","Menu","Container","Segment","Dropdown","Link","Router","validate","get","Navbar","loggedIn","props","user","name","first","middle","last","address","pin","state","house","phone","area","district","_id","email","aadhar","getUserDetails","headerToken","event","setState","pushRoute","optionsArray","key","value","text","onProfileClick","logOut","token","headers","data","status","activeItem","logInStatusRender"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Menu, Container, Segment, Dropdown } from 'semantic-ui-react';\nimport {Link, Router} from '../routes';\nimport validate from '../localmodules/token_validate';\nimport get from '../localmodules/express_get';\n\nexport default class Navbar extends Component {\n\n    state = {\n        loggedIn : this.props.loggedIn,\n        user : {\n            name : {first :'', middle:'', last : ''},\n            address: {pin : '', state : '', house : '', phone : '', area:'', district:''},\n            _id : '',\n            email : '',\n            aadhar : ''\n        }\n    }\n\n    static getInitialProps(props) {\n        return validate(props.headerToken);\n    }\n\n    componentDidMount = () => {  \n        this.getUserDetails(this.props.headerToken);\n    }\n\n\n    logOut = (event) => {\n        this.setState({ loggedIn : false });\n        Router.pushRoute('/user/logout');\n    }\n\n    onProfileClick = () => {\n\n    }\n    \n\n\n    logInStatusRender = () => {\n\n        const optionsArray = [\n            {key : '1', value : 'details', text : 'Profile'},\n            {key : '2', value : 'orders', text : 'Orders'}\n        ]\n        if(this.state.loggedIn){\n            return (\n                <Menu.Menu position='right'>\n                    <Menu.Item\n                        name={this.state.user.name.first +\" \"+ this.state.user.name.last}\n                        onClick={this.onProfileClick}                  \n                    />\n\n                    <Menu.Item \n                        name='Logout'\n                        onClick={this.logOut}    \n                    />\n                </Menu.Menu>\n\n            );\n        }\n\n\n        return (\n            <Menu.Menu position=\"right\">\n\n                <Link route='/user/register'>\n                    <a className='item'>Register</a>\n                </Link>\n\n                <Link route='/user/login'>\n                    <a className='item'>Login</a>\n                </Link>\n\n            </Menu.Menu>\n        );\n    }\n\n    getUserDetails = async (token) => {\n        const headers = { 'Content-Type':'application/json', 'x-auth-token' : token};\n        if(this.state.loggedIn){\n            const {data, status} = await get('/user/login/me', headers);\n            this.setState({user : data});\n        }\n\n    }\n\n\n\n\n    render() {\n\n        const { activeItem  } = this.state;\n        return (\n                <Menu size='massive' inverted color='blue'>\n                    \n                    <Container>\n                        <Link route={`/${validate('eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjVlYTMwMTFjMDUwZGFlMzI3YTFiMGIxOSIsImlhdCI6MTU4ODI3NzE0NH0.N8pZTLqwvgrSmkSYP9FJkXDBqSZUOgBWeCmE__ewS-o').headerToken}`}>\n                            <a className='item'>eR</a>\n                        </Link>\n                    \n                    {this.logInStatusRender()}\n                    </Container>\n                </Menu>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}